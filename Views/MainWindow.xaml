<Window x:Class="FolderIconManager.WPF.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:vm="clr-namespace:FolderIconManager.WPF.ViewModels"
        mc:Ignorable="d"
        Title="Ù…Ø¯ÛŒØ±ÛŒØª Ø§ÛŒÚ©ÙˆÙ† Ù¾ÙˆØ´Ù‡â€ŒÙ‡Ø§" 
        Height="700" 
        Width="1000"
        FlowDirection="RightToLeft"
        WindowStartupLocation="CenterScreen"
        Background="#F5F5F5">

    <Window.DataContext>
        <vm:MainViewModel/>
    </Window.DataContext>

    <Grid Margin="10">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- Ù‡Ø¯Ø± Ùˆ Ú©Ù†ØªØ±Ù„â€ŒÙ‡Ø§ÛŒ Ø§ØµÙ„ÛŒ -->
        <Border Grid.Row="0" 
                Background="White" 
                CornerRadius="8" 
                Padding="15" 
                Margin="0,0,0,10"
                Effect="{StaticResource MaterialDesignShadowDepth1}">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>

                <StackPanel Grid.Column="0">
                    <TextBlock Text="ðŸ—‚ï¸ Ù…Ø¯ÛŒØ±ÛŒØª Ø§ÛŒÚ©ÙˆÙ† Ù¾ÙˆØ´Ù‡â€ŒÙ‡Ø§" 
                               FontSize="20" 
                               FontWeight="Bold" 
                               Foreground="#2C3E50"
                               Margin="0,0,0,10"/>
                    
                    <TextBlock Text="ðŸ’¾ Ø§Ù†ØªØ®Ø§Ø¨ Ø¯Ø±Ø§ÛŒÙˆÙ‡Ø§ Ø¨Ø±Ø§ÛŒ Ø§Ø³Ú©Ù†" 
                               FontSize="14" 
                               FontWeight="Bold" 
                               Foreground="#2C3E50"
                               Margin="0,0,0,5"/>
                    
                    <Border BorderBrush="#E0E0E0" 
                            BorderThickness="1" 
                            CornerRadius="4"
                            Background="White"
                            Height="120"
                            Margin="0,0,0,5">
                        <ListView x:Name="DrivesListView"
                                  ItemsSource="{Binding AvailableDrives}"
                                  SelectionMode="Multiple"
                                  BorderThickness="0"
                                  Background="Transparent"
                                  FontSize="12">
                            <ListView.ItemTemplate>
                                <DataTemplate>
                                    <StackPanel Orientation="Horizontal" Margin="5,2">
                                        <TextBlock Text="{Binding StatusIcon}" 
                                                   FontSize="14" 
                                                   VerticalAlignment="Center"
                                                   Margin="0,0,8,0"/>
                                        <TextBlock Text="{Binding DisplayName}" 
                                                   VerticalAlignment="Center"/>
                                    </StackPanel>
                                </DataTemplate>
                            </ListView.ItemTemplate>
                        </ListView>
                    </Border>
                    
                    <StackPanel Orientation="Horizontal">
                        <Button Content="ðŸ”„ ØªØ§Ø²Ù‡â€ŒØ³Ø§Ø²ÛŒ Ø¯Ø±Ø§ÛŒÙˆÙ‡Ø§" 
                                Command="{Binding RefreshDrivesCommand}"
                                Padding="10,4"
                                Background="#95A5A6"
                                Foreground="White"
                                BorderThickness="0"
                                FontSize="12"
                                Margin="0,0,5,0"/>
                        <TextBlock Text="{Binding AvailableDrives.Count, StringFormat='{}{0} Ø¯Ø±Ø§ÛŒÙˆ Ø¢Ù…Ø§Ø¯Ù‡'}" 
                                   FontSize="12" 
                                   Foreground="#7F8C8D"
                                   VerticalAlignment="Center"/>
                    </StackPanel>
                    
                </StackPanel>

                <StackPanel Grid.Column="1" 
                            Orientation="Horizontal" 
                            VerticalAlignment="Center">
                    <Button Content="âš™ï¸ ØªÙ†Ø¸ÛŒÙ…Ø§Øª" 
                            Command="{Binding OpenSettingsCommand}"
                            Padding="15,10"
                            Background="#F39C12"
                            Foreground="White"
                            BorderThickness="0"
                            FontSize="14"
                            Margin="0,0,10,0"/>
                    
                    <Button Content="ðŸ” Ø§Ø³Ú©Ù†" 
                            Command="{Binding ScanFoldersCommand}"
                            IsEnabled="{Binding IsScanning, Converter={StaticResource InverseBooleanConverter}}"
                            Padding="20,10"
                            Background="#27AE60"
                            Foreground="White"
                            BorderThickness="0"
                            FontSize="14"
                            FontWeight="Bold"
                            Margin="0,0,10,0"/>
                    
                    <Button Content="ðŸ—‘ï¸ Ù¾Ø§Ú© Ú©Ø±Ø¯Ù†" 
                            Command="{Binding ClearListsCommand}"
                            Padding="15,10"
                            Background="#E74C3C"
                            Foreground="White"
                            BorderThickness="0"
                            FontSize="14"/>
                </StackPanel>
            </Grid>
        </Border>

        <!-- Ù†ÙˆØ§Ø± Ù¾ÛŒØ´Ø±ÙØª Ùˆ ÙˆØ¶Ø¹ÛŒØª -->
        <Border Grid.Row="1" 
                Background="White" 
                CornerRadius="8" 
                Padding="15" 
                Margin="0,0,0,10"
                Visibility="{Binding IsScanning, Converter={StaticResource BooleanToVisibilityConverter}}">
            <StackPanel>
                <TextBlock Text="{Binding StatusMessage}" 
                           FontSize="14" 
                           Foreground="#34495E"
                           Margin="0,0,0,5"/>
                <ProgressBar Value="{Binding ScanProgress}" 
                             Maximum="100" 
                             Height="8"
                             Background="#E0E0E0"
                             Foreground="#3498DB"/>
            </StackPanel>
        </Border>

        <!-- Ù„ÛŒØ³Øª Ù¾ÙˆØ´Ù‡â€ŒÙ‡Ø§ Ùˆ Ø§Ù†ØªØ®Ø§Ø¨ Ø§ÛŒÚ©ÙˆÙ† Ø¨Ø§ ØªØ¨ -->
        <TabControl Grid.Row="2" 
                    Background="Transparent"
                    BorderThickness="0"
                    Margin="0,0,0,10">
            
            <!-- ØªØ¨ Ù¾ÙˆØ´Ù‡â€ŒÙ‡Ø§ÛŒ Ø¨Ø¯ÙˆÙ† Ø§ÛŒÚ©ÙˆÙ† Ùˆ Ø§Ù†ØªØ®Ø§Ø¨ Ø§ÛŒÚ©ÙˆÙ† -->
            <TabItem Header="ðŸ“‚ Ù¾ÙˆØ´Ù‡â€ŒÙ‡Ø§ÛŒ Ø¨Ø¯ÙˆÙ† Ø§ÛŒÚ©ÙˆÙ†" 
                     FontSize="14" 
                     FontWeight="Bold"
                     Background="White"
                     Margin="0,0,5,0">
                <Grid>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="*"/>
                        <RowDefinition Height="Auto"/>
                    </Grid.RowDefinitions>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>
                    
                    <!-- Ù¾ÙˆØ´Ù‡â€ŒÙ‡Ø§ÛŒ Ø¨Ø¯ÙˆÙ† Ø§ÛŒÚ©ÙˆÙ† (Ú†Ù¾) -->
                    <Border Grid.Column="0" 
                            Background="White" 
                            CornerRadius="8" 
                            Padding="15"
                            Margin="0,0,5,0"
                            Effect="{StaticResource MaterialDesignShadowDepth1}">
                        <Grid>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="*"/>
                                <RowDefinition Height="Auto"/>
                            </Grid.RowDefinitions>

                            <StackPanel Grid.Row="0" 
                                        Orientation="Horizontal" 
                                        Margin="0,0,0,10">
                                <TextBlock Text="ðŸ“‚ Ù¾ÙˆØ´Ù‡â€ŒÙ‡Ø§ÛŒ Ø¨Ø¯ÙˆÙ† Ø§ÛŒÚ©ÙˆÙ†" 
                                           FontSize="16" 
                                           FontWeight="Bold" 
                                           Foreground="#2C3E50"
                                           VerticalAlignment="Center"/>
                                <TextBlock Text="{Binding FoldersWithoutIcons.Count, StringFormat=' ({0})'}" 
                                           FontSize="14" 
                                           Foreground="#7F8C8D"
                                           VerticalAlignment="Center"
                                           Margin="5,0,0,0"/>
                            </StackPanel>

                            <ListBox Grid.Row="1" 
                                     ItemsSource="{Binding FoldersWithoutIcons}"
                                     SelectedItem="{Binding SelectedFolderWithoutIcon}"
                                     FontSize="12"
                                     BorderBrush="#E0E0E0"
                                     BorderThickness="1">
                                <ListBox.ItemTemplate>
                                    <DataTemplate>
                                        <Grid Margin="5,3">
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="Auto"/>
                                                <ColumnDefinition Width="*"/>
                                            </Grid.ColumnDefinitions>
                                            
                                            <!-- Ø§ÛŒÚ©ÙˆÙ† Ù¾ÛŒØ´â€ŒÙØ±Ø¶ Ù¾ÙˆØ´Ù‡ -->
                                            <TextBlock Grid.Column="0"
                                                       Text="ðŸ“" 
                                                       FontSize="16"
                                                       VerticalAlignment="Center"
                                                       Margin="0,0,10,0"/>
                                            
                                            <StackPanel Grid.Column="1">
                                                <TextBlock Text="{Binding Name}" 
                                                           FontWeight="Bold"
                                                           FontSize="13"
                                                           Foreground="#2C3E50"/>
                                                <TextBlock Text="{Binding DisplayPath}" 
                                                           FontSize="11"
                                                           Foreground="#7F8C8D"
                                                           Margin="0,2,0,0"/>
                                            </StackPanel>
                                        </Grid>
                                    </DataTemplate>
                                </ListBox.ItemTemplate>
                            </ListBox>
                        </Grid>
                    </Border>
                    
                    <!-- Ù¾Ù†Ù„ Ø§Ù†ØªØ®Ø§Ø¨ Ø§ÛŒÚ©ÙˆÙ† (Ø±Ø§Ø³Øª) -->
                    <Border Grid.Column="1" 
                            Background="White" 
                            CornerRadius="8" 
                            Padding="15"
                            Effect="{StaticResource MaterialDesignShadowDepth1}">
                        <Grid>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="*"/>
                            </Grid.RowDefinitions>
                            
                            <StackPanel Grid.Row="0" 
                                        Orientation="Horizontal" 
                                        Margin="0,0,0,10">
                                <TextBlock Text="ðŸŽ¨ Ø§Ù†ØªØ®Ø§Ø¨ Ø§ÛŒÚ©ÙˆÙ†" 
                                           FontSize="16" 
                                           FontWeight="Bold" 
                                           Foreground="#2C3E50"
                                           VerticalAlignment="Center"/>
                            </StackPanel>
                            
                            <ListBox Grid.Row="1" 
                                     x:Name="IconsListBox"
                                     ItemsSource="{Binding AvailableIcons}"
                                     SelectedItem="{Binding SelectedIcon}"
                                     FontSize="12"
                                     BorderBrush="#E0E0E0"
                                     BorderThickness="1">
                                <ListBox.ItemsPanel>
                                    <ItemsPanelTemplate>
                                        <WrapPanel Orientation="Horizontal"/>
                                    </ItemsPanelTemplate>
                                </ListBox.ItemsPanel>
                                <ListBox.ItemTemplate>
                                    <DataTemplate>
                                        <Border BorderBrush="#E0E0E0" 
                                                BorderThickness="1" 
                                                CornerRadius="4"
                                                Background="White"
                                                Margin="5"
                                                Width="60"
                                                Height="60">
                                            <Grid>
                                                <Image Source="{Binding Path, Converter={StaticResource NullToImageConverter}}" 
                                                       Stretch="Uniform"
                                                       Margin="5"/>
                                                <TextBlock Text="{Binding Name}" 
                                                           FontSize="8"
                                                           HorizontalAlignment="Center"
                                                           VerticalAlignment="Bottom"
                                                           Margin="0,0,0,2"
                                                           TextTrimming="CharacterEllipsis"/>
                                            </Grid>
                                        </Border>
                                    </DataTemplate>
                                </ListBox.ItemTemplate>
                            </ListBox>
                        </Grid>
                    </Border>
                    
                    <!-- Ø¯Ú©Ù…Ù‡â€ŒÙ‡Ø§ÛŒ Ù¾Ø§ÛŒÛŒÙ†ÛŒ -->
                    <StackPanel Grid.Row="1" 
                                Grid.ColumnSpan="2"
                                Orientation="Horizontal" 
                                Margin="0,10,0,0"
                                HorizontalAlignment="Center">
                        <Button Content="ðŸŒ Ø¬Ø³ØªØ¬Ùˆ" 
                                Command="{Binding SearchIconsOnlineCommand}"
                                Padding="20,10"
                                Background="#3498DB"
                                Foreground="White"
                                BorderThickness="0"
                                FontSize="14"/>
                        <Button Content="ðŸ”„ Ø±ÙØ±Ø´" 
                                Command="{Binding RefreshIconsCommand}"
                                Padding="20,10"
                                Background="#E67E22"
                                Foreground="White"
                                BorderThickness="0"
                                FontSize="14"
                                Margin="10,0,0,0"/>
                        <Button Content="âœ¨ Ø§Ø¹Ù…Ø§Ù„ Ø§ÛŒÚ©ÙˆÙ†" 
                                Command="{Binding ApplySelectedIconCommand}"
                                Padding="20,10"
                                Background="#9B59B6"
                                Foreground="White"
                                BorderThickness="0"
                                FontSize="14"
                                Margin="10,0,0,0"/>
                        <Button Content="ðŸ“ Ø§ÙØ²ÙˆØ¯Ù† Ø¹Ú©Ø³" 
                                Command="{Binding AddNewImageCommand}"
                                Padding="20,10"
                                Background="#27AE60"
                                Foreground="White"
                                BorderThickness="0"
                                FontSize="14"
                                Margin="10,0,0,0"/>
                    </StackPanel>
                </Grid>
            </TabItem>
            
            <!-- ØªØ¨ Ù¾ÙˆØ´Ù‡â€ŒÙ‡Ø§ÛŒ Ø¨Ø§ Ø§ÛŒÚ©ÙˆÙ† -->
            <TabItem Header="âœ… Ù¾ÙˆØ´Ù‡â€ŒÙ‡Ø§ÛŒ Ø¨Ø§ Ø§ÛŒÚ©ÙˆÙ†" 
                     FontSize="14" 
                     FontWeight="Bold"
                     Background="White"
                     Margin="5,0,0,0">
                <Border Background="White" 
                        CornerRadius="8" 
                        Padding="15"
                        Effect="{StaticResource MaterialDesignShadowDepth1}">
                    <Grid>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="*"/>
                            <RowDefinition Height="Auto"/>
                        </Grid.RowDefinitions>

                        <StackPanel Grid.Row="0" 
                                    Orientation="Horizontal" 
                                    Margin="0,0,0,10">
                            <TextBlock Text="âœ… Ù¾ÙˆØ´Ù‡â€ŒÙ‡Ø§ÛŒ Ø¨Ø§ Ø§ÛŒÚ©ÙˆÙ†" 
                                       FontSize="16" 
                                       FontWeight="Bold" 
                                       Foreground="#2C3E50"
                                       VerticalAlignment="Center"/>
                            <TextBlock Text="{Binding FoldersWithIcons.Count, StringFormat=' ({0})'}" 
                                       FontSize="14" 
                                       Foreground="#7F8C8D"
                                       VerticalAlignment="Center"
                                       Margin="5,0,0,0"/>
                        </StackPanel>

                        <ListBox Grid.Row="1" 
                                 ItemsSource="{Binding FoldersWithIcons}"
                                 SelectedItem="{Binding SelectedFolderWithIcon}"
                                 FontSize="12"
                                 BorderBrush="#E0E0E0"
                                 BorderThickness="1">
                            <ListBox.ItemTemplate>
                                <DataTemplate>
                                    <Grid Margin="5,3">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="Auto"/>
                                            <ColumnDefinition Width="*"/>
                                        </Grid.ColumnDefinitions>
                                        
                                        <!-- Ø§ÛŒÚ©ÙˆÙ† Ù¾ÛŒØ´â€ŒÙØ±Ø¶ Ù¾ÙˆØ´Ù‡ (Ø¨Ø±Ø§ÛŒ Ø¬Ù„ÙˆÚ¯ÛŒØ±ÛŒ Ø§Ø² Ú©Ø±Ø´) -->
                                        <TextBlock Grid.Column="0"
                                                   Text="âœ…" 
                                                   FontSize="16"
                                                   VerticalAlignment="Center"
                                                   Margin="0,0,10,0"/>
                                        
                                        <StackPanel Grid.Column="1">
                                            <TextBlock Text="{Binding Name}" 
                                                       FontWeight="Bold"
                                                       FontSize="13"
                                                       Foreground="#2C3E50"/>
                                            <TextBlock Text="{Binding DisplayPath}" 
                                                       FontSize="11"
                                                       Foreground="#7F8C8D"
                                                       Margin="0,2,0,0"/>
                                        </StackPanel>
                                    </Grid>
                                </DataTemplate>
                            </ListBox.ItemTemplate>
                        </ListBox>

                        <StackPanel Grid.Row="2" 
                                    Orientation="Horizontal" 
                                    Margin="0,10,0,0">
                            <Button Content="ðŸ—‘ï¸ Ø­Ø°Ù Ø§ÛŒÚ©ÙˆÙ†" 
                                    Command="{Binding RemoveIconFromSelectedFolderCommand}"
                                    IsEnabled="{Binding SelectedFolderWithIcon, Converter={StaticResource NullToBooleanConverter}}"
                                    Padding="15,8"
                                    Background="#E67E22"
                                    Foreground="White"
                                    BorderThickness="0"
                                    FontSize="14"/>
                            <Button Content="ðŸ”„ Ø¨Ø§Ø²Ù†Ø´Ø§Ù†ÛŒ Ù‡Ù…Ù‡" 
                                    Command="{Binding ClearFoldersWithIconsCommand}"
                                    Padding="15,8"
                                    Background="#E74C3C"
                                    Foreground="White"
                                    BorderThickness="0"
                                    FontSize="14"
                                    Margin="10,0,0,0"/>
                        </StackPanel>
                    </Grid>
                </Border>
            </TabItem>
        </TabControl>

        <!-- Ù†ÙˆØ§Ø± ÙˆØ¶Ø¹ÛŒØª -->
        <Border Grid.Row="3" 
                Background="White" 
                CornerRadius="8" 
                Padding="15" 
                Margin="0,10,0,0">
            <TextBlock Text="{Binding StatusMessage}" 
                       FontSize="14" 
                       Foreground="#34495E"
                       VerticalAlignment="Center"/>
        </Border>
    </Grid>
</Window>
